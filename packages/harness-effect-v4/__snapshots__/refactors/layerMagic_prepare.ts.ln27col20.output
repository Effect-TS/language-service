// Result of running refactor layerMagic at position 27:20
import { Effect, Layer, pipe, ServiceMap  } from "effect"

class DbConnection extends ServiceMap.Service<DbConnection>()("DbConnection", {
    make: Effect.succeed({})
}) {
  static Default = Layer.effect(this, this.make)
}
class FileSystem extends ServiceMap.Service<FileSystem>()("FileSystem", {
  make: Effect.succeed({})
}) {
  static Default = Layer.effect(this, this.make)
}
class Cache extends ServiceMap.Service<Cache>()("Cache", {
  make: Effect.as(FileSystem.asEffect(), {})
}) {
  static Default = Layer.effect(this, this.make)
}
class UserRepository extends ServiceMap.Service<UserRepository>()("UserRepository", {
  make: Effect.as(Effect.andThen(DbConnection.asEffect(), Cache.asEffect()), {})
}) {
  static Default = Layer.effect(this, this.make)
}

export const prepareSimple = UserRepository.Default

export const prepareWithPipe =[UserRepository.Default, Cache.Default] as any as Layer.Layer<Cache | UserRepository>

export const prepareSomewhatComplex = pipe(
  UserRepository.Default,
  Layer.provideMerge(Cache.Default),
  Layer.merge(DbConnection.Default)
)
