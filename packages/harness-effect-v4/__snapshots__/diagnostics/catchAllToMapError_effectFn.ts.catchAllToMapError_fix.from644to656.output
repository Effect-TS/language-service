// code fix catchAllToMapError_fix  output for range 644 - 656
import { Effect } from "effect"

class MyErrorTagged {
  readonly _tag = "MyErrorTagged"
  constructor(readonly cause: unknown) {}
}

// Effect.fn with catch that should be mapError
export const shouldReportEffectFn = Effect.fn(function*() {
  return yield* Effect.fail("error")
}, Effect.catch((cause) => Effect.fail(new MyErrorTagged(cause))))

export const shouldReportEffectFnTraced = Effect.fn("traced")(function*() {
  return yield* Effect.fail("error")
}, Effect.catch((cause) => Effect.fail(new MyErrorTagged(cause))))

export const shouldReportEffectFnUntraced = Effect.fnUntraced(function*() {
  return yield* Effect.fail("error")
}, Effect.mapError((cause) => new MyErrorTagged(cause)))

// Should NOT report: catch returning Effect.succeed
export const shouldNotReportEffectFn = Effect.fn(function*() {
  return yield* Effect.fail("error")
}, Effect.catch(() => Effect.succeed(42)))
