// code fix deterministicKeys_fix  output for range 427 - 434
// @effect-diagnostics deterministicKeys:error
// @test-config { "extendedKeyDetection": true }
import * as Persistable from "@/diagnostics/utils"
import { ServiceMap } from "effect"

// simple case inside same file
export function MyConstructor<X>(/** @effect-identifier */ identifier: string) {
  return class extends ServiceMap.Service<X, {}>()("hey/" + identifier) {}
}

export class MyClass extends MyConstructor<MyClass>("@effect/harness-effect-v4/MyClass") {
}

// referenced on another file
export class TTLRequest extends Persistable.Class<{
  payload: { id: number }
}>()("TTLRequest", {
  primaryKey: (req) => `TTLRequest:${req.id}`
}) {}
